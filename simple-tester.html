<!DOCTYPE html>
<html>
<head>
    <title>Voiceflow Bookmarklet Tester</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5; 
            max-width: 800px;
            margin: 0 auto;
        }
        .container { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        .bookmarklet {
            background: #007bff;
            color: white;
            padding: 15px 25px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            display: inline-block;
            margin: 10px 0;
        }
        .bookmarklet:hover {
            background: #0056b3;
        }
        .instructions {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .code-block {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            border: 1px solid #ddd;
            margin: 10px 0;
            white-space: pre-wrap;
        }
        ol { line-height: 1.6; }
        li { margin: 8px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Voiceflow Bookmarklet Tester</h1>
        
        <div class="instructions">
            <h3>This approach works by running the automation directly on your chatbot page!</h3>
            <p>Since we can't access iframe content due to browser security, we'll inject the script directly into your chatbot.</p>
        </div>

        <h2>Method 1: Bookmarklet (Easiest)</h2>
        
        <p><strong>Step 1:</strong> Drag this button to your bookmarks bar:</p>
        
        <a href="javascript:(function(){const questions=['What are the admission requirements?','How do I apply for financial aid?','What research opportunities are available?','Who should I contact about course registration?','What courses are required for the aerospace engineering degree?','What is the application deadline?','How do I schedule a campus visit?','What scholarships are available?','Tell me about the faculty research areas','What are the prerequisites for graduate programs?'];let currentIndex=0;let interval=null;function log(msg){console.log('[VF Tester] '+msg);}function sendQuestion(){if(currentIndex>=questions.length){log('All questions completed!');clearInterval(interval);return;}const textarea=document.querySelector('textarea.vfrc-chat-input');const sendBtn=document.querySelector('#vfrc-send-message');if(!textarea||!sendBtn){log('Could not find chat elements. Stopping.');clearInterval(interval);return;}const question=questions[currentIndex];textarea.value=question;textarea.dispatchEvent(new Event('input',{bubbles:true}));setTimeout(()=>{sendBtn.click();log(`Sent Q${currentIndex+1}: ${question}`);currentIndex++;},500);}if(interval){clearInterval(interval);interval=null;log('Stopped testing.');}else{log('Starting automated testing...');interval=setInterval(sendQuestion,8000);sendQuestion();}})();" class="bookmarklet">ü§ñ VF Auto Tester</a>

        <p><strong>Step 2:</strong> Go to your chatbot page: <code>https://aeroastrovfbot.netlify.app/chatbot.html</code></p>
        
        <p><strong>Step 3:</strong> Wait for the chat to fully load, then click the bookmarklet!</p>

        <h2>Method 2: Browser Console Script</h2>
        
        <div class="instructions">
            <p>If bookmarklets don't work, you can paste this script directly into your browser console:</p>
        </div>

        <p><strong>Step 1:</strong> Go to your chatbot page</p>
        <p><strong>Step 2:</strong> Press F12 to open developer tools</p>
        <p><strong>Step 3:</strong> Go to the "Console" tab</p>
        <p><strong>Step 4:</strong> Copy and paste this code:</p>

        <div class="code-block">// Voiceflow Auto Tester Script
const questions = [
    "What are the admission requirements?",
    "How do I apply for financial aid?",
    "What research opportunities are available?",
    "Who should I contact about course registration?",
    "What courses are required for the aerospace engineering degree?",
    "What is the application deadline?",
    "How do I schedule a campus visit?",
    "What scholarships are available?",
    "Tell me about the faculty research areas",
    "What are the prerequisites for graduate programs?"
];

let currentIndex = 0;
let testingInterval = null;

function log(message) {
    console.log(`[VF Tester] ${message}`);
}

function sendQuestion() {
    if (currentIndex >= questions.length) {
        log('‚úÖ All questions completed!');
        clearInterval(testingInterval);
        return;
    }
    
    // Find the chat elements
    const textarea = document.querySelector('textarea.vfrc-chat-input');
    const sendButton = document.querySelector('#vfrc-send-message');
    
    if (!textarea || !sendButton) {
        log('‚ùå Could not find chat elements. Stopping test.');
        clearInterval(testingInterval);
        return;
    }
    
    const question = questions[currentIndex];
    
    // Clear and enter the question
    textarea.value = '';
    textarea.value = question;
    
    // Trigger input events
    textarea.dispatchEvent(new Event('input', { bubbles: true }));
    textarea.dispatchEvent(new Event('change', { bubbles: true }));
    
    // Send the message after a short delay
    setTimeout(() => {
        sendButton.click();
        log(`üì§ Sent Q${currentIndex + 1}/${questions.length}: ${question}`);
        currentIndex++;
    }, 500);
}

function startTesting() {
    if (testingInterval) {
        clearInterval(testingInterval);
        testingInterval = null;
        log('‚èπÔ∏è Testing stopped.');
        return;
    }
    
    log('üöÄ Starting automated testing...');
    log(`üìù Will test ${questions.length} questions with 8-second intervals`);
    
    // Test selectors first
    const textarea = document.querySelector('textarea.vfrc-chat-input');
    const sendButton = document.querySelector('#vfrc-send-message');
    
    if (!textarea) {
        log('‚ùå Could not find textarea.vfrc-chat-input');
        return;
    }
    if (!sendButton) {
        log('‚ùå Could not find send button #vfrc-send-message');
        return;
    }
    
    log('‚úÖ Found all required elements');
    
    // Start testing
    currentIndex = 0;
    testingInterval = setInterval(sendQuestion, 8000); // 8 seconds between questions
    sendQuestion(); // Send first question immediately
}

// Start the testing
startTesting();

// To stop testing manually, run: clearInterval(testingInterval);</div>

        <p><strong>Step 5:</strong> Press Enter to run the script</p>

        <h2>What You'll See:</h2>
        <ul>
            <li>‚úÖ Green checkmarks when elements are found</li>
            <li>üì§ Progress messages as each question is sent</li>
            <li>‚ùå Error messages if something goes wrong</li>
            <li>‚èπÔ∏è Completion message when all questions are done</li>
        </ul>

        <h2>To Stop Testing:</h2>
        <p>In the console, type: <code>clearInterval(testingInterval)</code></p>

        <div class="instructions">
            <h3>üí° Tips:</h3>
            <ul>
                <li>Make sure your chatbot is fully loaded before starting</li>
                <li>The script waits 8 seconds between questions</li>
                <li>You can modify the questions array in the script</li>
                <li>Watch the console for progress updates</li>
                <li>All responses will appear in your chatbot as normal</li>
            </ul>
        </div>
    </div>
</body>
</html>
